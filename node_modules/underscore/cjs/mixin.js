var underscore = require('underscore/cjs/underscore.js');
var each = require('underscore/cjs/each.js');
var functions = require('underscore/cjs/functions.js');
var _setup = require('underscore/cjs/_setup.js');
var _chainResult = require('underscore/cjs/_chainResult.js');

// Add your own custom functions to the Underscore object.
function mixin(obj) {
  each(functions(obj), function(name) {
    var func = underscore[name] = obj[name];
    underscore.prototype[name] = function() {
      var args = [this._wrapped];
      _setup.push.apply(args, arguments);
      return _chainResult(this, func.apply(underscore, args));
    };
  });
  return underscore;
}

module.exports = mixin;
